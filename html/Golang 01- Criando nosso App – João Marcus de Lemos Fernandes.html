<!DOCTYPE html><html><head><title> Golang 01- Criando nosso App – João Marcus de Lemos Fernandes </title><meta charset="utf-8"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=6.0"/><meta name="robot" content="all"/><meta name="rating" content="general"/><meta name="distribution" content="global"/><meta name="language" content="en,pt"/><meta name="robots" content="index,follow"/><meta name="theme-color" content=""/><link rel="apple-touch-icon" href="/assets/images/logo-hex.webp"/><meta property="og:image" content="http://joaomarcuslf.com/assets/images/logo-hex.webp"/><meta property="og:title" content="Golang 01- Criando nosso App"/><meta property="twitter:title" content="Golang 01- Criando nosso App"/><meta property="og:site_name" content="Golang 01- Criando nosso App"/><meta name="description" content="Expectativas "/><meta property="og:description" content="Expectativas "/><link rel="alternate" type="application/rss+xml" title="Golang 01- Criando nosso App - Expectativas " href="/feed.xml"></script><meta name="keywords" content="Developer, Software engineer, Front-end, Full-stack, React, Javascript, Flask, Python, Joaomarcuslf, Tech Mentor, Mentorship, Mentoria, Senior Developer, Web development"/><meta name="abstract" content="My presentation website as Software developer"/><meta name="author" content="João Marcus de Lemos Fernandes"/><meta property="og:locale" content="en"/><link rel="canonical" href="https://joaomarcuslf.com/"/><meta property="og:url" content="https://joaomarcuslf.com/"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@"/><meta name="twitter:creator" content="@joaomarcuslf"/><link rel="stylesheet" type="text/css" href="/assets/css/vendors.css"></script><link rel="stylesheet" type="text/css" href="/assets/css/style.css"/><link rel="stylesheet" type="text/css" href="/assets/css/mentorship.css"></script><link rel="alternate" type="application/rss+xml" title="@joaomarcuslf.com - Full-stack Software engineer - I'm Software Engineer since 2015 with great expertise in Front-end development. I like to teach a lot, and write some posts, you can check more here." href="/feed.xml"/><link rel="stylesheet" type="text/css" href="/assets/css/hljs.css"/></head><body><div id="main" role="main" class="main"><section class="hero is-link has-background is-mini bg-mentorship typewriter"><div class="hero-body"><h1 class="title" aria-label="Golang 01- Criando nosso App" aria-hidden="true"> Golang 01- Criando nosso App </h1><h2 class="subtitle">Um App simples gerador de QR code</h2></div></section><br/><div class="container"><article class="media"><div class="media-content"><div class="content"><h2 id="expectativas">Expectativas</h2><p>Nessa aula vamos aprender como baixar um pacote em Go, como receber valores do usuários, e devolver valores na tela via <code class="language-plaintext highlighter-rouge">cli</code>, como importar tanto pacotes internos, como externos.</p><blockquote><p>O termo CLI vem de Command Line Interface, você pode conhecer mais esse termo <a href="https://en.wikipedia.org/wiki/Command-line_interface">aqui</a>.</p></blockquote><hr/><p>Ponto de partida desse post:</p><div><article class="project-card" data-gh-project="joaomarcuslf/go-mentorship"><figure class="project-card-image"><p class="image"><img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/go/go-original.svg" alt="go logo" width="128" height="128"/></p></figure><div class="project-card-content"><header class="project-card-header"><p class="project-card-suptitle"> On <a target="blank" href="https://github.com/joaomarcuslf/go-mentorship/tree/lesson-01" title="View on GitHub">GitHub</a><small>#/tree/lesson-01</small></p><a target="blank" href="https://github.com/joaomarcuslf/go-mentorship/tree/lesson-01" title="View on GitHub"><h6 class="project-card-title">go-mentorship</h6></a></header><div class="project-card-body"><dl class="project-card-details"><dt>Forked</dt><dd class="fork"><a target="blank" href="https://github.com/joaomarcuslf/go-mentorship/fork" title="View fork details"></a></dd><dt>Starred</dt><dd class="star"><a target="blank" href="https://github.com/joaomarcuslf/go-mentorship/stargazers " title="View fork details"></a></dd></dl></div></div></article></div><h2 id="primeiros-passos">Primeiros passos</h2><p>Vamos começar criando o nosso <code class="language-plaintext highlighter-rouge">main.go</code>, que será o nosso arquivo de entrada.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">touch </span>main.go
</code></pre></div></div><p>Abra o <code class="language-plaintext highlighter-rouge">main.go</code>, e adicione o seguinte código:</p><div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"fmt"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Hello, world!"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div><p>O <code class="language-plaintext highlighter-rouge">main.go</code> como você já deve saber, é o arquivo principal de todo projeto em Go, ele inicia a execução do programa. Porém, como o Go é baseado em pacotes, temos que declarar o pacote <code class="language-plaintext highlighter-rouge">main</code> e logo depois importamos o pacote <code class="language-plaintext highlighter-rouge">fmt</code> para que possamos mostrar como saída no console uma mensagem.</p><p>Você pode ver seu código funcionando com:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>go run main.go
</code></pre></div></div><p>Agora, com isso, nós escrevemos nosso primeiro programa, e ainda que básico, será o nossa base para nossas próximas aulas, e no fim, você irá se surpreender com como ele vai ficar.</p><h2 id="adicionando-barcode">Adicionando Barcode</h2><p>Vamos desenvolver essa sessão utilizando a lib mais importante desse projeto: <a href="github.com/boombuler/barcode">boombuler/barcode</a>.</p><p>Com essa lib nós iremos criar QR codes com base em uma <a href="https://pkg.go.dev/strings">string</a> provida pelo usuário.</p><p>Para começar, vamos instalar a lib com:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>go get github.com/boombuler/barcode
</code></pre></div></div><p>E para você importar a lib no nosso <code class="language-plaintext highlighter-rouge">main.go</code>, mude o import para seguir esse modelo:</p><div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">(</span>
  <span class="s">"image/png"</span>
  <span class="s">"os"</span>

  <span class="s">"github.com/boombuler/barcode"</span>
  <span class="s">"github.com/boombuler/barcode/qr"</span>
<span class="p">)</span>
</code></pre></div></div><p>Se você estiver usando vscode, você pode clicar com <code class="language-plaintext highlighter-rouge">Option + Click</code>, ou <code class="language-plaintext highlighter-rouge">Alt + Click</code> para entender o que cada um dessas libs fazem, e como usar cada uma delas. Não é o propósito desse tutorial.</p><p>Depois de atualizar os imports, vamos para a função <code class="language-plaintext highlighter-rouge">func main()</code>, limpe o conteúdo dela, e vamos escrever parte por parte.</p><div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">input</span> <span class="o">:=</span> <span class="s">"Hello, world!"</span>

<span class="n">qrCode</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">qr</span><span class="o">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">input</span><span class="p">,</span> <span class="n">qr</span><span class="o">.</span><span class="n">M</span><span class="p">,</span> <span class="n">qr</span><span class="o">.</span><span class="n">Auto</span><span class="p">)</span>
</code></pre></div></div><p>Temos um <code class="language-plaintext highlighter-rouge">input</code>, que é a string que queremos que o QR code seja gerado, e um <code class="language-plaintext highlighter-rouge">err</code>, que é um possível erro que ocorreu ao gerar o QR code. Um padrão para lidar com erros no Go é com essa estrutura simples:</p><div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div><p>Caso não tenha erro, nossa variável <code class="language-plaintext highlighter-rouge">qrCode</code> será gerada corretamente, porém precisamos definir uma dimensão para ela, para isso, vamos usar a função <code class="language-plaintext highlighter-rouge">barcode.Scale</code> que irá definir a dimensão do QR code de acordo com a string que foi passada.</p><div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">qrCode</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">barcode</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">qrCode</span><span class="p">,</span> <span class="m">200</span><span class="p">,</span> <span class="m">200</span><span class="p">)</span>
</code></pre></div></div><p>A linha anterior sobreescreveu os valores de <code class="language-plaintext highlighter-rouge">qrCode</code> com a nova dimensão, e <code class="language-plaintext highlighter-rouge">err</code>. Como essa função também pode causar um erro, você dever repetir o <code class="language-plaintext highlighter-rouge">if</code> anterior que fizemos (sim, essa estrutura será repetida muitas vezes em um código).</p><p>A partir de agora, sempre que você vir um <code class="language-plaintext highlighter-rouge">err</code>, parta do princípio que você deve colocar um <code class="language-plaintext highlighter-rouge">if</code> para tratar o erro, eu só irei comentar quando ou o tratamento for diferente de um panic, ou não precisar ter nenhum.</p><p>Beleza, com isso, vamos criar um arquivo para sarvar nosso QR code, e vamos salvar ele como <code class="language-plaintext highlighter-rouge">qr.png</code>:</p><div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">file</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">os</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="s">"qrcode.png"</span><span class="p">)</span>
<span class="k">defer</span> <span class="n">file</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">defer</code> é uma palavra chave que é utilizada para que o código seja executado no final do código, ou seja, depois que o código foi executado.</p><p>Agora, é só salvar o arquivo:</p><div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">png</span><span class="o">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">qrCode</span><span class="p">)</span>
</code></pre></div></div><p>Esse padrão que o <code class="language-plaintext highlighter-rouge">Encode</code> está utilizando, onde nós passamos como primeiro local/arquivo que siga uma interface <code class="language-plaintext highlighter-rouge">io.Writer</code> como parâmetro, e segundo argumento o que queremos escrever, é muito comum no Go, e sempre que ela se repetir eu irei comentar sobre.</p><p>Vamos ver se o código funcionou:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>go run main.go
</code></pre></div></div><p>Com o fim desse código, você devve ver um arquivo <code class="language-plaintext highlighter-rouge">qrcode.png</code>, e se você ler o arquivo, você vai ver um QR code com a string que você passou.</p><h2 id="recebendo-input-do-usuário">Recebendo input do usuário</h2><p>Bom, é bem sem graça você ter uma string estática sempre, então nós vamos receber input do usuário.</p><p>Você precisará atualizar os imports, e modificar a lina que você declarou o <code class="language-plaintext highlighter-rouge">input</code> para:</p><div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="c">/* ... */</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">var</span> <span class="n">input</span> <span class="kt">string</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Enter your string: "</span><span class="p">)</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Scanln</span><span class="p">(</span><span class="o">&amp;</span><span class="n">input</span><span class="p">)</span>

  <span class="c">/* ... */</span>
<span class="p">}</span>
</code></pre></div></div><p>Vamos ver se o código funcionou:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>go run main.go
</code></pre></div></div><h2 id="concluindo">Concluindo</h2><p>Bom, seu código já está funcionando, e você consegue facilmente gerar um QR code com a string que você passou. Nas próximas aulas nós vamos refatorar nosso código para que nossa <code class="language-plaintext highlighter-rouge">main()</code> fique mais limpa.</p><h2 id="adicionais">Adicionais</h2><ul><li><a href="https://golang.org/ref/spec#Types">GoLang: Tipos de dados</a></li><li><a href="https://golang.org/ref/spec#Operators">GoLang: Operadores</a></li><li><a href="https://golang.org/ref/spec#Expressions">GoLang: Expressões</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=golang.Go">Extensão Golang vscode</a></li></ul><p>Se, você estiver usando, e é recomendado que esteja, utilizando Git, não se esqueça de atualizar o seu <code class="language-plaintext highlighter-rouge">.gitignore</code>, e colocar lá dentro a seguinte linha:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>qrcode.png
</code></pre></div></div><h2 id="link-do-projeto">Link do projeto:</h2><div><article class="project-card" data-gh-project="joaomarcuslf/go-mentorship"><figure class="project-card-image"><p class="image"><img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/go/go-original.svg" alt="go logo" width="128" height="128"/></p></figure><div class="project-card-content"><header class="project-card-header"><p class="project-card-suptitle"> On <a target="blank" href="https://github.com/joaomarcuslf/go-mentorship" title="View on GitHub">GitHub</a></p><a target="blank" href="https://github.com/joaomarcuslf/go-mentorship" title="View on GitHub"><h6 class="project-card-title">go-mentorship</h6></a></header><div class="project-card-body"><dl class="project-card-details"><dt>Forked</dt><dd class="fork"><a target="blank" href="https://github.com/joaomarcuslf/go-mentorship/fork" title="View fork details"></a></dd><dt>Starred</dt><dd class="star"><a target="blank" href="https://github.com/joaomarcuslf/go-mentorship/stargazers " title="View fork details"></a></dd></dl></div></div></article></div><h2 id="lista-de-aulas">Lista de aulas:</h2><ul><li><a href="/mentorship/lesson-00-getting-started">Golang 00 - Primeiros passos</a></li><li><a href="/mentorship/lesson-01-creating-app">Golang 01- Criando nosso App</a></li><li><a href="/mentorship/lesson-02-refactoring">Golang 02 - Refatorando nossos serviços</a></li><li><a href="/mentorship/lesson-03-web-server">Golang 03 - Adicionando nosso servidor</a></li><li><a href="/mentorship/lesson-04-generate-qr">Golang 04 - Adicionando rota geradora</a></li><li><a href="/mentorship/lesson-05-add-api">Golang 05 - Adicionando nossa API</a></li><li><a href="/mentorship/lesson-06-consuming-api">Golang 06 - Consumindo API</a></li><li><a href="/mentorship/lesson-07-expanding-the-front-end">Golang 07 - Expandindo o Front-end</a></li></ul><script>document.querySelector('[href="'+location.pathname+'"]').className="is-underlined has-text-weight-bold";</script></div></div></article></div></div><script src="/assets/js/vendors/highlight.min.js"></script><script src="/assets/js/base.js"></script><script src="/assets/js/post-page.js"></script><script src="/assets/js/hljs.js"></script><script src="/assets/js/mentorship.js"></script></body></html>